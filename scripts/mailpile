#!/usr/bin/env python2
import sys, os

# Make imports work without PYTHONPATH
mailpile_root = os.path.dirname(     # Mailpile root
    os.path.dirname(                 # scripts/
        os.path.realpath(__file__)   # this script
    )
)

sys.path.append(mailpile_root)

from mailpile.app import Main
from mailpile import defaults

# Override the config path
html_theme_path = defaults.CONFIG_RULES['sys'][2]['path'][2]['html_theme']
new_html_theme_path = (
    html_theme_path[0],
    html_theme_path[1],
    os.path.join(mailpile_root, 'static', 'default')
)
defaults.CONFIG_RULES['sys'][2]['path'][2]['html_theme'] = new_html_theme_path


Main(sys.argv[1:])
